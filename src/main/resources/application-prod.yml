spring:
    application:
        name: ticket-system

    datasource:
        # 本番環境ではこれらの値を環境変数で上書き
        # export SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/ticketdb
        # export SPRING_DATASOURCE_USERNAME=ticket_user
        # export SPRING_DATASOURCE_PASSWORD=secure_password
        url: jdbc:postgresql://localhost:5432/ticketdb
        driver-class-name: org.postgresql.Driver
        username: ${DB_USERNAME:ticket_user}
        password: ${DB_PASSWORD:change-me}

    jpa:
        hibernate:
            ddl-auto: validate
        show-sql: false
        properties:
            hibernate:
                format_sql: false
                use_sql_comments: false

    batch:
        job:
            enabled: true
        jdbc:
            initialize-schema: always

logging:
    level:
        root: WARN
        com.example.ticket: INFO
        org.springframework.batch: WARN
    pattern:
        console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
        file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file:
        name: /var/log/ticket-system/app.log

# Custom Application Properties
ticket:
    sla:
        high-priority-hours: 4
        medium-priority-hours: 24
        low-priority-hours: 72
    batch:
        escalation-cron: "0 0 0 * * ?" # 毎日深夜0時
        statistics-cron: "0 0 1 * * ?" # 毎日深夜1時
        auto-close-cron: "0 0 2 * * ?" # 毎日深夜2時
